<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="张宇辰 (pw)"><title>把 blog 从 octopress 迁移到 hexo · 张宇辰的博客</title><meta name="description" content="之前用的一直用 octopress 来写 blog。对于我来说 octopress 有个最大的缺点，就是它是 ruby 写的。导致我经常就要去搞搞 ruby 的版本啊、gem 啊什么杂七杂八的事情。今天无意间看到了一个 node 写的博客工具 hexo，功能类似于 octorepss 但是部署成本比"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.v1.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 4.2.0"></head><body><div class="sidebar"><div class="image-info">2019 年夏 @ 内蒙响沙湾</div><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;border-radius:127px"><h3 title="" style="margin-top: 0.5em"><a href="/">张宇辰的博客</a></h3><div class="description"><p>10 年程序员</p></div></div></div><ul class="social-links"></ul></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h1><a href="/2014/04/22/from-octopress-to-hexo/">把 blog 从 octopress 迁移到 hexo</a></h1></div><div class="post-content"><p>之前用的一直用 <a href="http://octopress.org" target="_blank" rel="noopener">octopress</a> 来写 blog。对于我来说 octopress 有个最大的缺点，就是它是 ruby 写的。导致我经常就要去搞搞 ruby 的版本啊、gem 啊什么杂七杂八的事情。今天无意间看到了一个 node 写的博客工具 <a href="http://hexo.io" target="_blank" rel="noopener">hexo</a>，功能类似于 octorepss 但是部署成本比 octopress 低了不少，于是花了 15 分钟把整个博客从 octopress 迁移到了 hexo 上面。</p>
<p>和 octopress 类似，hexo 也是一个静态页面生成工具。它允许用 markdown 语法来写文章，并且生成并上传整个网站到 github。它和 octopress 有着完全一样的文章格式，所以整个迁移过程非常轻松。</p>
<h3 id="安装-hexo"><a href="#安装-hexo" class="headerlink" title="安装 hexo"></a>安装 hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 国内网速慢可以尝试加上 --registry=http://r.cnpmjs.org 来使用国内镜像加速</span></span><br><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure>

<h3 id="初始化目录"><a href="#初始化目录" class="headerlink" title="初始化目录"></a>初始化目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog &amp;&amp; <span class="built_in">cd</span> blog</span><br></pre></td></tr></table></figure>

<h3 id="迁移-octopress-的文章"><a href="#迁移-octopress-的文章" class="headerlink" title="迁移 octopress 的文章"></a>迁移 octopress 的文章</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf <span class="built_in">source</span>/_posts</span><br><span class="line">cp -a OCTOPRESS_BLOG/<span class="built_in">source</span>/_posts <span class="built_in">source</span>/</span><br></pre></td></tr></table></figure>

<h3 id="修改链接规则"><a href="#修改链接规则" class="headerlink" title="修改链接规则"></a>修改链接规则</h3><p>需要修改 <code>_config.yml</code> 中 <code>new_post_name</code> 一行:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">new_post_name:</span> <span class="string">:year-:month-:day-:title.md</span></span><br></pre></td></tr></table></figure>

<h3 id="修改博客信息"><a href="#修改博客信息" class="headerlink" title="修改博客信息"></a>修改博客信息</h3><p>例如博客名称、网站地址等等，这些内容都在 <code>_config.yml</code> 中。另外还要将配置文件最后的 <code>deploy</code> 信息修改成 github 地址:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:USER/REPO</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">brandh:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<p>如果博客用了顶级域名，还需要在 <code>source</code> 目录下新建一个 <code>CNAME</code> 文件:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"lostjs.com"</span> &gt; <span class="built_in">source</span>/CNAME</span><br></pre></td></tr></table></figure>

<h3 id="预览效果"><a href="#预览效果" class="headerlink" title="预览效果"></a>预览效果</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<p>然后浏览器访问本地 4000 端口即可。<code>hexo server</code> 和 octopress 的 <code>rake preview</code> 命令类似，会自动监听本地文件修改，但是如果修改的是 <code>_config.yml</code> 的话就需要重新 <code>hexo generate</code> 才能看到效果。</p>
<h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>

<p>迁移完毕，浏览器中试一下，原先的 url 都能正常访问。</p>
<h1 id="整体感受"><a href="#整体感受" class="headerlink" title="整体感受"></a>整体感受</h1><p>hexo 给我的第一感受就是简单，不像 octopress 一样，hexo init 后生成的文件非常少，一眼看过去清除明了。在任何一台机器上只需要 <code>npm install -g hexo</code> 之后就能使用，不像 ruby 一样还需要搞 rbenv 并编译 ruby 之类的事情。另外一个感受就是速度快，不管是 generate 还是 deploy 都比 octopress 快了不少。整体来说 hexo 是一个非常值得一试的博客工具。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2014-04-22</span><i class="fa fa-tag"></i><a class="tag" href="/tags/hexo/" title="hexo">hexo </a></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2014/04/23/replace-nginx-by-node/" title="用 node 代替 nginx 做请求分发">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2014/04/21/a-simple-promise-cache-by-lru-cache/" title="异步、promise 与缓存">下一篇</a></li></ul></div></div></div></div></div></body></html>